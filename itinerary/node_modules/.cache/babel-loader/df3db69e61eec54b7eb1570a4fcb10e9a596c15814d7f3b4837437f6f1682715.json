{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EstimatedDocumentCountOperation = void 0;\nconst command_1 = require(\"./command\");\nconst operation_1 = require(\"./operation\");\n/** @internal */\nclass EstimatedDocumentCountOperation extends command_1.CommandOperation {\n  constructor(collection, options = {}) {\n    super(collection, options);\n    this.options = options;\n    this.collectionName = collection.collectionName;\n  }\n  async execute(server, session) {\n    const cmd = {\n      count: this.collectionName\n    };\n    if (typeof this.options.maxTimeMS === 'number') {\n      cmd.maxTimeMS = this.options.maxTimeMS;\n    }\n    // we check for undefined specifically here to allow falsy values\n    // eslint-disable-next-line no-restricted-syntax\n    if (this.options.comment !== undefined) {\n      cmd.comment = this.options.comment;\n    }\n    const response = await super.executeCommand(server, session, cmd);\n    return response?.n || 0;\n  }\n}\nexports.EstimatedDocumentCountOperation = EstimatedDocumentCountOperation;\n(0, operation_1.defineAspects)(EstimatedDocumentCountOperation, [operation_1.Aspect.READ_OPERATION, operation_1.Aspect.RETRYABLE, operation_1.Aspect.CURSOR_CREATING]);","map":{"version":3,"names":["command_1","require","operation_1","EstimatedDocumentCountOperation","CommandOperation","constructor","collection","options","collectionName","execute","server","session","cmd","count","maxTimeMS","comment","undefined","response","executeCommand","n","exports","defineAspects","Aspect","READ_OPERATION","RETRYABLE","CURSOR_CREATING"],"sources":["../../src/operations/estimated_document_count.ts"],"sourcesContent":[null],"mappings":";;;;;;AAIA,MAAAA,SAAA,GAAAC,OAAA;AACA,MAAAC,WAAA,GAAAD,OAAA;AAYA;AACA,MAAaE,+BAAgC,SAAQH,SAAA,CAAAI,gBAAwB;EAI3EC,YAAYC,UAAsB,EAAEC,OAAA,GAAyC,EAAE;IAC7E,KAAK,CAACD,UAAU,EAAEC,OAAO,CAAC;IAC1B,IAAI,CAACA,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,cAAc,GAAGF,UAAU,CAACE,cAAc;EACjD;EAES,MAAMC,OAAOA,CAACC,MAAc,EAAEC,OAAkC;IACvE,MAAMC,GAAG,GAAa;MAAEC,KAAK,EAAE,IAAI,CAACL;IAAc,CAAE;IAEpD,IAAI,OAAO,IAAI,CAACD,OAAO,CAACO,SAAS,KAAK,QAAQ,EAAE;MAC9CF,GAAG,CAACE,SAAS,GAAG,IAAI,CAACP,OAAO,CAACO,SAAS;;IAGxC;IACA;IACA,IAAI,IAAI,CAACP,OAAO,CAACQ,OAAO,KAAKC,SAAS,EAAE;MACtCJ,GAAG,CAACG,OAAO,GAAG,IAAI,CAACR,OAAO,CAACQ,OAAO;;IAGpC,MAAME,QAAQ,GAAG,MAAM,KAAK,CAACC,cAAc,CAACR,MAAM,EAAEC,OAAO,EAAEC,GAAG,CAAC;IAEjE,OAAOK,QAAQ,EAAEE,CAAC,IAAI,CAAC;EACzB;;AA1BFC,OAAA,CAAAjB,+BAAA,GAAAA,+BAAA;AA6BA,IAAAD,WAAA,CAAAmB,aAAa,EAAClB,+BAA+B,EAAE,CAC7CD,WAAA,CAAAoB,MAAM,CAACC,cAAc,EACrBrB,WAAA,CAAAoB,MAAM,CAACE,SAAS,EAChBtB,WAAA,CAAAoB,MAAM,CAACG,eAAe,CACvB,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}