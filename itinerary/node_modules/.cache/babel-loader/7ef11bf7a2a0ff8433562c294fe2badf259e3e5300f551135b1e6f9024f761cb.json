{"ast":null,"code":"import NavBarVue from \"@/components/NavBar.vue\";\nimport CardViewVue from \"@/components/CardView.vue\";\nimport axios from \"axios\";\nimport { ref } from \"vue\";\nexport default {\n  name: \"AdminHome\",\n  components: {\n    NavBarVue,\n    CardViewVue\n  },\n  data() {\n    return {\n      activities: [],\n      currentPage: 1,\n      totalPages: 1,\n      itemsPerPage: 10,\n      searchParam: \"\"\n    };\n  },\n  methods: {\n    notApproved() {\n      return this.activities.filter(a => a.Approved === false);\n    },\n    approved() {\n      return this.activities.filter(a => a.Approved === true);\n    },\n    fetchItems() {\n      // Make an HTTP request to the Node.js API endpoint\n      axios.get(\"/api/allAct\", {\n        params: {\n          page: this.currentPage,\n          limit: this.itemsPerPage\n        }\n      }).then(response => {\n        // Ensure the response data structure matches your expectation\n        const {\n          activities,\n          currentPage,\n          totalPages\n        } = response.data;\n\n        // Assign the data to the component's properties\n        this.activities = activities;\n        this.currentPage = currentPage;\n        this.totalPages = totalPages;\n      }).catch(error => {\n        console.error(error);\n      });\n    },\n    previousPage() {\n      if (this.currentPage > 1) {\n        this.currentPage--;\n        this.fetchItems();\n      }\n    },\n    nextPage() {\n      if (this.currentPage < this.totalPages) {\n        this.currentPage++;\n        this.fetchItems();\n      }\n    }\n  },\n  computed: {\n    paginatedItems() {\n      return this.activities.slice((this.currentPage - 1) * this.itemsPerPage, this.currentPage * this.itemsPerPage);\n    },\n    filteredAct: function () {\n      return this.activities.filter(a => {\n        if (this.searchParam !== null && this.searchParam !== undefined && this.searchParam !== \"\") {\n          return a.Act_name && a.Act_name.toLowerCase().match(this.searchParam.toLowerCase());\n        }\n      });\n      // return this.activities.filter((a) => a.Act_name.toLowerCase().match(this.searchParam.toLowerCase()) && a.Approved === true);\n    },\n    filteredAct() {\n      if (this.checkedCat.length === 0) {\n        return this.activities; // No types selected, return all plans\n      } else {\n        return this.activities.filter(p => this.checkedCat.includes(p.Category));\n      }\n    }\n  },\n  mounted() {\n    this.fetchItems();\n  },\n  setup() {\n    const role = localStorage.getItem(\"role\");\n    console.log(role);\n    const checkedCat = ref([]);\n    const filterShow = ref(false);\n    return {\n      filterShow,\n      checkedCat\n    };\n  }\n  // async created() {\n  //   await axios\n  //     .get(\"/api/\")\n  //     .then((response) => (this.activities = response.data));\n  // },\n};","map":{"version":3,"names":["NavBarVue","CardViewVue","axios","ref","name","components","data","activities","currentPage","totalPages","itemsPerPage","searchParam","methods","notApproved","filter","a","Approved","approved","fetchItems","get","params","page","limit","then","response","catch","error","console","previousPage","nextPage","computed","paginatedItems","slice","filteredAct","undefined","Act_name","toLowerCase","match","checkedCat","length","p","includes","Category","mounted","setup","role","localStorage","getItem","log","filterShow"],"sources":["/Users/nicolechan/Desktop/FYP_Test/itinerary/src/pages/AdminHome.vue"],"sourcesContent":["<template>\n  <div>\n    <NavBarVue />\n    <div class=\"outer-container\">\n      <div class=\"welcomeMsg\">\n      <form class=\"search-form\">\n        <input\n          type=\"text\"\n          class=\"form-control input-lg search-input\"\n          placeholder=\"search by activity name..\"\n          v-model=\"searchParam\"\n        />\n      </form>\n      <button class=\"btn btn-primary\" @click=\"filterShow = !filterShow\"><span><font-awesome-icon :icon=\"['fas', 'filter']\" /></span>Filter</button>\n      <div class=\"filter-form\" v-if=\"filterShow\">\n              <div class=\"checkboxType\">\n                <div><h4 style=\"font-family: BungeeInline\">Type</h4></div>\n                <div><input\n                  type=\"checkbox\"\n                  id=\"NaturalAttractions\"\n                  value=\"Natural Attractions\"\n                  v-model=\"checkedCat\"\n                />\n                <label for=\"NaturalAttractions\">Natural Attractions</label></div>\n\n                <div><input\n                  type=\"checkbox\"\n                  id=\"UrbanAttractions\"\n                  value=\"Urban Attractions\"\n                  v-model=\"checkedCat\"\n                />\n                <label for=\"UrbanAttractions\">Urban Attractions</label></div>\n\n                <div><input\n                  type=\"checkbox\"\n                  id=\"AdventureandOutdoor\"\n                  value=\"Adventure and Outdoor\"\n                  v-model=\"checkedCat\"\n                />\n                <label for=\"AdventureandOutdoor\">Adventure and Outdoor</label></div>\n\n                <div><input\n                  type=\"checkbox\"\n                  id=\"CulinaryandFood\"\n                  value=\"Culinary and Food\"\n                  v-model=\"checkedCat\"\n                />\n                <label for=\"CulinaryandFood\">Culinary and Food</label></div>\n                \n                <div><input\n                  type=\"checkbox\"\n                  id=\"WellnessandRetreats\"\n                  value=\"Wellness and Retreats\"\n                  v-model=\"checkedCat\"\n                />\n                <label for=\"WellnessandRetreats\">Wellness and Retreats</label></div>\n\n                <div><input\n                  type=\"checkbox\"\n                  id=\"ThemePark\"\n                  value=\"Theme Park\"\n                  v-model=\"checkedCat\"\n                />\n                <label for=\"ThemePark\">Theme Park</label></div>\n\n                <div><input\n                  type=\"checkbox\"\n                  id=\"EntertainmentComplexes\"\n                  value=\"Entertainment Complexes\"\n                  v-model=\"checkedCat\"\n                />\n                <label for=\"EntertainmentComplexes\">Entertainment Complexes</label></div>\n                \n                <div><input\n                  type=\"checkbox\"\n                  id=\"Shopping\"\n                  value=\"Shopping\"\n                  v-model=\"checkedCat\"\n                />\n                <label for=\"Shopping\">Shopping</label></div>\n                \n                <p>{{checkedCat}}</p>\n                \n              </div>\n            </div>\n\n    </div>\n    <h1 v-if=\"searchParam!=''\" style=\"font-family: BungeeInline\">Search Results</h1>\n    <div class=\"search-container\">\n      <div class=\"scrolls\">\n        <CardViewVue\n          v-for=\"activity in filteredAct\"\n          :key=\"activity._id\"\n          :actname=\"activity.Act_name\"\n          :area=\"activity.Area\"\n          :district=\"activity.District\"\n          :category=\"activity.Category\"\n          :charge=\"activity.Charge\"\n          :act_ID=\"activity._id\"\n          :approved=\"activity.Approved\"\n          :showButton=\"activity\"\n        >\n        <template #type>\n          <div style=\"margin-bottom: 8px\">\n            Type: <span v-for=\"t in activity.Type\" :key=\"t\">{{ t }}, </span>\n          </div>\n          <!-- <div><p>File:{{ activity.file.length }}</p></div> -->\n        </template>\n      </CardViewVue>\n      </div>\n    </div>\n    \n    \n    <h1 style=\"font-family: BungeeInline\">Waiting for approval...</h1>\n    <div class=\"container\">\n      <div class=\"scrolls\">\n        <CardViewVue\n          v-for=\"activity in notApproved().slice(0, 10)\"\n          :key=\"activity._id\"\n          :actname=\"activity.Act_name\"\n          :area=\"activity.Area\"\n          :district=\"activity.District\"\n          :category=\"activity.Category\"\n          :charge=\"activity.Charge\"\n          :act_ID=\"activity._id\"\n          :approved=\"activity.Approved\"\n          :showButton=\"activity\"\n        >\n        <template #type>\n          <div style=\"margin-bottom: 8px\">\n            Type: <span v-for=\"t in activity.Type\" :key=\"t\">{{ t }}, </span>\n          </div>\n          <!-- <div><p>File:{{ activity.file.length }}</p></div> -->\n        </template>\n      </CardViewVue>\n      </div>\n    </div>\n    <h1 style=\"font-family: BungeeInline\">Approved activities</h1>\n    <div class=\"container\">\n      <CardViewVue\n        v-for=\"activity in approved()\"\n        :key=\"activity._id\"\n        :actname=\"activity.Act_name\"\n        :area=\"activity.Area\"\n        :district=\"activity.District\"\n        :category=\"activity.Category\"\n        :charge=\"activity.Charge\"\n        :act_ID=\"role === true\"\n      >\n      <template #type>\n          <div style=\"margin-bottom: 8px\">\n            Type: <span v-for=\"t in activity.Type\" :key=\"t\">{{ t }}, </span>\n          </div>\n        </template>\n    </CardViewVue>\n    </div>\n\n    <!-- <p>{{ activities }}</p> -->\n  </div>\n  </div>\n</template>\n\n<script>\nimport NavBarVue from \"@/components/NavBar.vue\";\nimport CardViewVue from \"@/components/CardView.vue\";\nimport axios from \"axios\";\nimport { ref } from \"vue\";\nexport default {\n  name: \"AdminHome\",\n  components: {\n    NavBarVue,\n    CardViewVue,\n  },\n  data() {\n    return {\n      activities: [],\n      currentPage: 1,\n      totalPages: 1,\n      itemsPerPage: 10,\n      searchParam:\"\",\n    };\n  },\n  methods: {\n    notApproved() {\n      return this.activities.filter((a) => a.Approved === false);\n    },\n    approved() {\n      return this.activities.filter((a) => a.Approved === true);\n    },\n    fetchItems() {\n      // Make an HTTP request to the Node.js API endpoint\n      axios\n        .get(\"/api/allAct\", {\n          params: {\n            page: this.currentPage,\n            limit: this.itemsPerPage,\n          },\n        })\n        .then((response) => {\n          // Ensure the response data structure matches your expectation\n          const { activities, currentPage, totalPages } = response.data;\n\n          // Assign the data to the component's properties\n          this.activities = activities;\n          this.currentPage = currentPage;\n          this.totalPages = totalPages;\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    },\n    previousPage() {\n      if (this.currentPage > 1) {\n        this.currentPage--;\n        this.fetchItems();\n      }\n    },\n    nextPage() {\n      if (this.currentPage < this.totalPages) {\n        this.currentPage++;\n        this.fetchItems();\n      }\n    },\n  },\n  computed: {\n    paginatedItems() {\n      return this.activities.slice(\n        (this.currentPage - 1) * this.itemsPerPage,\n        this.currentPage * this.itemsPerPage\n      );\n    },\n    filteredAct: function () {\n      return this.activities.filter((a) => {\n        if (\n          this.searchParam !== null &&\n          this.searchParam !== undefined &&\n          this.searchParam !== \"\"\n        ) {\n          return (\n            a.Act_name &&\n            a.Act_name.toLowerCase().match(this.searchParam.toLowerCase())\n          );\n        }\n      });\n      // return this.activities.filter((a) => a.Act_name.toLowerCase().match(this.searchParam.toLowerCase()) && a.Approved === true);\n    },\n    filteredAct() {\n    if (this.checkedCat.length === 0) {\n      return this.activities; // No types selected, return all plans\n    } else {\n      return this.activities.filter((p) => this.checkedCat.includes(p.Category));\n    }\n  }\n  },\n  mounted() {\n    this.fetchItems();\n\n  },\n  setup(){\n    const role = localStorage.getItem(\"role\");\n    console.log(role);\n\n    const checkedCat = ref([]);\n    const filterShow = ref(false);\n\n    return{\n      filterShow,\n      checkedCat\n    }\n  }\n  // async created() {\n  //   await axios\n  //     .get(\"/api/\")\n  //     .then((response) => (this.activities = response.data));\n  // },\n};\n</script>\n\n<style scoped>\n/* .outer-container{\n  padding: 30px;\n} */\n.container {\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.scrolls {\n  display: flex;\n  flex-wrap: no-wrap;\n  overflow-x: auto;\n  margin: 20px;\n}\n\n.search-container{\n  display: flex;\n  flex-wrap: wrap;\n}\n.search-form{\n  width: 50%;\n}\n.welcomeMsg{\n  height: 100px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-color: #1fbfaf;\n}\n.filter-form {\n  background-color: #fff;\n  position: relative;\n  top: 50px;\n  height: 250px;\n  width: 230px;\n  z-index: 100;\n  border-radius: 10px;\n  box-shadow: 0.3em 0.3em 1em #d3d3d3;;\n  padding: 10px;\n}\n\n</style>\n"],"mappings":"AAmKA,OAAOA,SAAQ,MAAO,yBAAyB;AAC/C,OAAOC,WAAU,MAAO,2BAA2B;AACnD,OAAOC,KAAI,MAAO,OAAO;AACzB,SAASC,GAAE,QAAS,KAAK;AACzB,eAAe;EACbC,IAAI,EAAE,WAAW;EACjBC,UAAU,EAAE;IACVL,SAAS;IACTC;EACF,CAAC;EACDK,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,UAAU,EAAE,EAAE;MACdC,WAAW,EAAE,CAAC;MACdC,UAAU,EAAE,CAAC;MACbC,YAAY,EAAE,EAAE;MAChBC,WAAW,EAAC;IACd,CAAC;EACH,CAAC;EACDC,OAAO,EAAE;IACPC,WAAWA,CAAA,EAAG;MACZ,OAAO,IAAI,CAACN,UAAU,CAACO,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAACC,QAAO,KAAM,KAAK,CAAC;IAC5D,CAAC;IACDC,QAAQA,CAAA,EAAG;MACT,OAAO,IAAI,CAACV,UAAU,CAACO,MAAM,CAAEC,CAAC,IAAKA,CAAC,CAACC,QAAO,KAAM,IAAI,CAAC;IAC3D,CAAC;IACDE,UAAUA,CAAA,EAAG;MACX;MACAhB,KAAI,CACDiB,GAAG,CAAC,aAAa,EAAE;QAClBC,MAAM,EAAE;UACNC,IAAI,EAAE,IAAI,CAACb,WAAW;UACtBc,KAAK,EAAE,IAAI,CAACZ;QACd;MACF,CAAC,EACAa,IAAI,CAAEC,QAAQ,IAAK;QAClB;QACA,MAAM;UAAEjB,UAAU;UAAEC,WAAW;UAAEC;QAAW,IAAIe,QAAQ,CAAClB,IAAI;;QAE7D;QACA,IAAI,CAACC,UAAS,GAAIA,UAAU;QAC5B,IAAI,CAACC,WAAU,GAAIA,WAAW;QAC9B,IAAI,CAACC,UAAS,GAAIA,UAAU;MAC9B,CAAC,EACAgB,KAAK,CAAEC,KAAK,IAAK;QAChBC,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;MACtB,CAAC,CAAC;IACN,CAAC;IACDE,YAAYA,CAAA,EAAG;MACb,IAAI,IAAI,CAACpB,WAAU,GAAI,CAAC,EAAE;QACxB,IAAI,CAACA,WAAW,EAAE;QAClB,IAAI,CAACU,UAAU,CAAC,CAAC;MACnB;IACF,CAAC;IACDW,QAAQA,CAAA,EAAG;MACT,IAAI,IAAI,CAACrB,WAAU,GAAI,IAAI,CAACC,UAAU,EAAE;QACtC,IAAI,CAACD,WAAW,EAAE;QAClB,IAAI,CAACU,UAAU,CAAC,CAAC;MACnB;IACF;EACF,CAAC;EACDY,QAAQ,EAAE;IACRC,cAAcA,CAAA,EAAG;MACf,OAAO,IAAI,CAACxB,UAAU,CAACyB,KAAK,CAC1B,CAAC,IAAI,CAACxB,WAAU,GAAI,CAAC,IAAI,IAAI,CAACE,YAAY,EAC1C,IAAI,CAACF,WAAU,GAAI,IAAI,CAACE,YAC1B,CAAC;IACH,CAAC;IACDuB,WAAW,EAAE,SAAAA,CAAA,EAAY;MACvB,OAAO,IAAI,CAAC1B,UAAU,CAACO,MAAM,CAAEC,CAAC,IAAK;QACnC,IACE,IAAI,CAACJ,WAAU,KAAM,IAAG,IACxB,IAAI,CAACA,WAAU,KAAMuB,SAAQ,IAC7B,IAAI,CAACvB,WAAU,KAAM,EAAC,EACtB;UACA,OACEI,CAAC,CAACoB,QAAO,IACTpB,CAAC,CAACoB,QAAQ,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,IAAI,CAAC1B,WAAW,CAACyB,WAAW,CAAC,CAAC;QAEjE;MACF,CAAC,CAAC;MACF;IACF,CAAC;IACDH,WAAWA,CAAA,EAAG;MACd,IAAI,IAAI,CAACK,UAAU,CAACC,MAAK,KAAM,CAAC,EAAE;QAChC,OAAO,IAAI,CAAChC,UAAU,EAAE;MAC1B,OAAO;QACL,OAAO,IAAI,CAACA,UAAU,CAACO,MAAM,CAAE0B,CAAC,IAAK,IAAI,CAACF,UAAU,CAACG,QAAQ,CAACD,CAAC,CAACE,QAAQ,CAAC,CAAC;MAC5E;IACF;EACA,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR,IAAI,CAACzB,UAAU,CAAC,CAAC;EAEnB,CAAC;EACD0B,KAAKA,CAAA,EAAE;IACL,MAAMC,IAAG,GAAIC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC;IACzCpB,OAAO,CAACqB,GAAG,CAACH,IAAI,CAAC;IAEjB,MAAMP,UAAS,GAAInC,GAAG,CAAC,EAAE,CAAC;IAC1B,MAAM8C,UAAS,GAAI9C,GAAG,CAAC,KAAK,CAAC;IAE7B,OAAM;MACJ8C,UAAU;MACVX;IACF;EACF;EACA;EACA;EACA;EACA;EACA;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}