{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport NavBar from \"@/components/NavBar.vue\";\nimport PlanCard from \"@/components/PlanCard.vue\";\nimport PopupForm from \"@/components/PopupForm.vue\";\nimport { ref } from \"vue\";\nimport axios from \"axios\";\n// import 'vue-datepicker/index.css';\nexport default {\n  name: \"CreateItinerary\",\n  components: {\n    NavBar,\n    PlanCard,\n    PopupForm\n  },\n  data() {\n    return {\n      step: 1,\n      totalSteps: 3,\n      participants: 1,\n      end: this.end,\n      start: this.start\n    };\n  },\n  methods: {\n    clicked() {\n      var dailyAct = {\n        day: {\n          act_name: this.act,\n          day: this.day,\n          start: this.sTime,\n          end: this.eTime,\n          memo: this.memo\n        }\n      };\n      var array = [];\n      array.setArrayLength(this.dateDiff);\n      this.dailyItin.push(dailyAct);\n      console.log(dailyAct);\n      console.log(array.length);\n    },\n    setArrayLength(length) {\n      if (length < this.myArray.length) {\n        this.myArray.splice(length);\n      } else if (length > this.myArray.length) {\n        const diff = length - this.myArray.length;\n        this.myArray = this.myArray.concat(Array(diff).fill(''));\n      }\n    },\n    nextStep() {\n      this.step++;\n    },\n    previousStep() {\n      this.step--;\n    },\n    addDays(date, days) {\n      // Function to add Days\n      var result = new Date(date);\n      result.setDate(result.getDate() + days);\n      return result.toLocaleString();\n    },\n    weekdays(date, days) {\n      var result = new Date(date);\n      result.setDate(result.getDate() + days);\n      return result.toLocaleString(\"en-US\", {\n        weekday: \"long\"\n      });\n    },\n    async create() {\n      const response = await axios.post(\"/api/create\", {\n        iname: this.iname,\n        itype: this.itype,\n        participants: this.participants,\n        from: this.start,\n        to: this.end,\n        dailyItin: this.dailyItin,\n        // actName: this.act,\n        // day: this.day,\n        // startTime: this.sTime,\n        // endTime: this.eTime,\n        // memo: this.memo,\n        is_public: this.is_public\n      });\n      console.log(response);\n      if (response.status == 201) {\n        alert(response.data);\n      } else {\n        alert(response.data);\n      }\n    }\n  },\n  computed: {\n    dateDiff() {\n      let day = new Date(this.end).getTime() - new Date(this.start).getTime();\n      let diff = Math.floor(day / 86400000) + 1;\n      return diff;\n    }\n  },\n  setup() {\n    const act = ref(\"\");\n    const day = ref();\n    const sTime = ref();\n    const eTime = ref();\n    const memo = ref(\"\");\n    const is_public = ref(true);\n    let dailyItin = [];\n    const popupTriggers = ref({\n      buttonTrigger: false\n    });\n    const togglePopup = trigger => {\n      popupTriggers.value[trigger] = !popupTriggers.value[trigger];\n    };\n    return {\n      popupTriggers,\n      togglePopup,\n      act,\n      day,\n      sTime,\n      eTime,\n      memo,\n      is_public,\n      dailyItin\n    };\n  }\n};","map":{"version":3,"names":["NavBar","PlanCard","PopupForm","ref","axios","name","components","data","step","totalSteps","participants","end","start","methods","clicked","dailyAct","day","act_name","act","sTime","eTime","memo","array","setArrayLength","dateDiff","dailyItin","push","console","log","length","myArray","splice","diff","concat","Array","fill","nextStep","previousStep","addDays","date","days","result","Date","setDate","getDate","toLocaleString","weekdays","weekday","create","response","post","iname","itype","from","to","is_public","status","alert","computed","getTime","Math","floor","setup","popupTriggers","buttonTrigger","togglePopup","trigger","value"],"sources":["/Users/nicolechan/Desktop/FYP_Test/itinerary/src/pages/CreateItinerary.vue"],"sourcesContent":["<template>\n  <div>\n    <NavBar />\n    <div class=\"container\">\n      <form @submit.prevent=\"create()\">\n        <section v-if=\"step == 1\">\n          <h1>Step 1</h1>\n          <div class=\"row mt-2\">\n            <label for=\"\">Itinerary Name</label>\n            <input\n              type=\"text\"\n              class=\"form-control\"\n              placeholder=\"give a name for your plan..\"\n              v-model=\"iname\"\n            />\n          </div>\n          <div class=\"row mt-2\">\n            <div class=\"col md-6\">\n              <label for=\"\">Type</label>\n              <select name=\"\" id=\"\" class=\"form-control\" v-model=\"itype\">\n                <option>Choose the trip type..</option>\n                <option>Solo</option>\n                <option>Couple</option>\n                <option>Friends</option>\n                <option>Family</option>\n              </select>\n            </div>\n            <div class=\"col md-6\">\n              <label for=\"\">Number of participants</label>\n              <input\n                type=\"number\"\n                v-model=\"participants\"\n                placeholder=\"how many?\"\n                class=\"form-control\"\n              />\n            </div>\n          </div>\n          <div class=\"row mt-2\">\n            <div class=\"col md-6\">\n              <label for=\"\">From</label>\n              <input\n                required\n                data-format=\"yyyy/mm/dd\"\n                type=\"date\"\n                class=\"form-control\"\n                placeholder=\"start date\"\n                v-model=\"start\"\n              />\n            </div>\n            <div class=\"col md-6\">\n              <label for=\"\">To</label>\n              <input\n                required\n                data-format=\"yyyy/mm/dd\"\n                type=\"date\"\n                class=\"form-control\"\n                placeholder=\"end date\"\n                v-model=\"end\"\n                :min=\"start\"\n              />\n            </div>\n          </div>\n        </section>\n\n        <section v-if=\"step == 2\">\n          <div class=\"addButton\">\n            <div>\n              <h1>Step 2</h1>\n            </div>\n            <div>\n              <button\n                class=\"btn create-btn\"\n                @click.prevent=\"() => togglePopup('buttonTrigger')\"\n              >\n                <span style=\"font-size: 1.5em; margin-right: 5px\">\n                  <font-awesome-icon icon=\"fa-solid fa-calendar-plus\" /> </span\n                >Add activities\n              </button>\n            </div>\n          </div>\n\n          <p>{{ dateDiff }}</p>\n\n          <div class=\"scrolls\">\n            <PlanCard\n              v-for=\"(n, i) in dateDiff\"\n              :key=\"n\"\n              :n=\"n\"\n              :start=\"addDays(start, i)\"\n              :daysOfWeek=\"weekdays(start, i)\"\n            />\n          </div>\n\n          <PopupForm\n            v-if=\"popupTriggers.buttonTrigger\"\n            :togglePopup=\"() => togglePopup('buttonTrigger')\"\n            :n=\"dateDiff\"\n            v-model:act=\"act\"\n            v-model:day=\"day\"\n            v-model:sTime=\"sTime\"\n            v-model:eTime=\"eTime\"\n            v-model:memo=\"memo\"\n            @clicked=\"clicked\"\n          />\n        </section>\n\n        <section v-if=\"step == 3\">\n          <h3>Step 3</h3>\n          <div>\n              <div class=\"form-check\">\n                <input\n                  class=\"form-check-input\"\n                  type=\"checkbox\"\n                  v-model=\"is_public\"\n                  id=\"flexCheckDefault\"\n                />\n                <label class=\"form-check-label\" for=\"flexCheckDefault\">\n                  Public\n                </label>\n                <small id=\"passwordHelpBlock\" class=\"form-text text-muted\">\n                  (Check the box if you want your plan to be seen by everyone.)\n                </small>\n              </div>\n            </div>\n          <label for=\"\">Confirm</label>\n          <input type=\"text\" class=\"form-control\" placeholder=\"confirm..\" />\n        </section>\n        <div class=\"row mt-2\">\n          <div class=\"buttons\">\n            <div>\n              <button\n                v-if=\"step != 1\"\n                @click.prevent=\"previousStep()\"\n                class=\"btn btn-primary\"\n              >\n                Back\n              </button>\n            </div>\n            <div>\n              <button\n                v-if=\"step != totalSteps && start != null && end != null\"\n                @click.prevent=\"nextStep()\"\n                class=\"btn btn-primary\"\n              >\n                Next\n              </button>\n              <button\n                v-if=\"step == totalSteps\"\n                class=\"btn btn-primary\"\n                type=\"submit\"\n              >\n                Create\n              </button>\n            </div>\n          </div>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport NavBar from \"@/components/NavBar.vue\";\nimport PlanCard from \"@/components/PlanCard.vue\";\nimport PopupForm from \"@/components/PopupForm.vue\";\nimport { ref } from \"vue\";\nimport axios from \"axios\";\n// import 'vue-datepicker/index.css';\nexport default {\n  name: \"CreateItinerary\",\n  components: {\n    NavBar,\n    PlanCard,\n    PopupForm,\n  },\n  data() {\n    return {\n      step: 1,\n      totalSteps: 3,\n      participants: 1,\n      end: this.end,\n      start: this.start,\n    };\n  },\n  methods: {\n    clicked() {\n      var dailyAct = {\n        day:{\n          act_name: this.act, \n        day: this.day, \n        start: this.sTime, \n        end: this.eTime, \n        memo: this.memo\n        } \n      };\n\n      var array = [];\n      array.setArrayLength(this.dateDiff)\n\n      this.dailyItin.push(dailyAct);\n      console.log(dailyAct);\n      console.log(array.length);\n      \n    },\n    setArrayLength(length) {\n      if (length < this.myArray.length) {\n        this.myArray.splice(length);\n      } else if (length > this.myArray.length) {\n        const diff = length - this.myArray.length;\n        this.myArray = this.myArray.concat(Array(diff).fill(''));\n      }\n    },\n    nextStep() {\n      this.step++;\n    },\n    previousStep() {\n      this.step--;\n    },\n    addDays(date, days) {\n      // Function to add Days\n      var result = new Date(date);\n      result.setDate(result.getDate() + days);\n      return result.toLocaleString();\n    },\n    weekdays(date, days) {\n      var result = new Date(date);\n      result.setDate(result.getDate() + days);\n      return result.toLocaleString(\"en-US\", { weekday: \"long\" });\n    },\n    async create() {\n      const response = await axios.post(\"/api/create\", {\n        iname: this.iname,\n        itype: this.itype,\n        participants: this.participants,\n        from: this.start,\n        to: this.end,\n        dailyItin: this.dailyItin,\n        // actName: this.act,\n        // day: this.day,\n        // startTime: this.sTime,\n        // endTime: this.eTime,\n        // memo: this.memo,\n        is_public: this.is_public\n      });\n\n      console.log(response);\n      if (response.status == 201) {\n        alert(response.data);\n      } else {\n        alert(response.data);\n      }\n    },\n  },\n  computed: {\n    dateDiff() {\n      let day = new Date(this.end).getTime() - new Date(this.start).getTime();\n      let diff = Math.floor(day / 86400000) + 1;\n      return diff;\n    },\n  },\n  setup() {\n    const act = ref(\"\");\n    const day = ref();\n    const sTime = ref();\n    const eTime = ref();\n    const memo = ref(\"\");\n    const is_public = ref(true);\n    let dailyItin = [];\n    \n\n    const popupTriggers = ref({\n      buttonTrigger: false,\n    });\n\n    const togglePopup = (trigger) => {\n      popupTriggers.value[trigger] = !popupTriggers.value[trigger];\n    };\n\n    return {\n      popupTriggers,\n      togglePopup,\n      act,\n      day,\n      sTime,\n      eTime,\n      memo,\n      is_public,\n      dailyItin\n    };\n  },\n};\n</script>\n<style scoped>\n.container {\n  width: 80%;\n  margin-top: 50px;\n}\n.buttons {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.slider {\n  display: block;\n  width: 100%;\n  color: #016a70;\n}\n\n.scrolls {\n  display: flex;\n  flex-wrap: no-wrap;\n  overflow-x: auto;\n  margin: 20px;\n}\n\n.addButton {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin: 10px;\n}\n.create-btn {\n  border-color: #016a70;\n  color: #016a70;\n}\n.create-btn:hover {\n  border-color: #016a70;\n  background-color: #016a70;\n  color: #ffffdd;\n}\n</style>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}